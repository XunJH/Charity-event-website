<main class="container" id="detail-area">
  <div *ngIf="loading">åŠ è½½ä¸­...</div>
  <div *ngIf="!event && !loading">æœªæ‰¾åˆ°è¯¥æ´»åŠ¨ã€‚</div>

  <div *ngIf="event && !loading">
    <div class="card">
      <!-- æ´»åŠ¨åŸºæœ¬ä¿¡æ¯ï¼ˆä¸å˜ï¼‰ -->
      <img [src]="'assets/images/event' + ((event.id % 8) || 8) + '.jpg'" alt="æ´»åŠ¨å›¾ç‰‡">
      <div class="card-body">
        <h2>{{ event.title }}</h2>
        <p class="meta">
          ğŸ“ {{ event.location }} Â· ğŸ“… {{ event.event_date }} Â· ç±»åˆ«: {{ event.category_name }}
        </p>
        <div class="progress-wrap">
          <div class="progress" [style.width]="getProgress(event.raised_amount, event.goal_amount) + '%'"></div>
        </div>
        <p>ç­¹æ¬¾ç›®æ ‡ï¼šÂ¥{{ event.goal_amount.toLocaleString() }}</p>
        <p>å·²ç­¹é‡‘é¢ï¼šÂ¥{{ event.raised_amount.toLocaleString() }}</p>
        <p style="margin-top:12px;">{{ event.description || 'è¿™æ˜¯æ´»åŠ¨ä»‹ç»æ®µè½ï¼Œå±•ç¤ºæ´»åŠ¨ç›®çš„ä¸å®‰æ’ã€‚' }}</p>
        <button class="btn-inline" style="margin-top:10px" (click)="goToRegistration()">ç«‹å³å‚ä¸</button>
      </div>
    </div>

    <!-- æŠ¥ååˆ—è¡¨ï¼ˆä¿®æ”¹éƒ¨åˆ†ï¼‰ -->
    <div style="margin-top: 20px;">
      <!-- ä½¿ç”¨ä»æŠ¥åæ¥å£è·å–çš„ registrationsList å’Œ registrationsCount -->
      <h3>å·²æŠ¥ååˆ—è¡¨ï¼ˆ{{ registrationsCount }}äººï¼‰</h3>
      
      <!-- æ˜¾ç¤ºæŠ¥ååˆ—è¡¨ï¼ˆä½¿ç”¨ registrationsList è€Œé event.registrationsï¼‰ -->
      <table *ngIf="registrationsList.length > 0">
        <thead>
          <tr>
            <th>å§“å</th>
            <th>é‚®ç®±</th>
            <th>ç”µè¯</th>
            <th>è´­ç¥¨æ•°é‡</th>
            <th>æŠ¥åæ—¶é—´</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let reg of registrationsList">
            <td>{{ reg.user_name }}</td>
            <td>{{ reg.email }}</td>
            <td>{{ reg.phone }}</td>
            <td>{{ reg.tickets }}</td>
            <!-- æ ¼å¼åŒ–æ—¥æœŸæ˜¾ç¤ºï¼ˆå¯é€‰ï¼‰ -->
            <td>{{ reg.registration_date | date:'yyyy-MM-dd HH:mm' }}</td>
          </tr>
        </tbody>
      </table>

      <!-- æ²¡æœ‰æŠ¥åè®°å½•æ—¶æ˜¾ç¤º -->
      <p *ngIf="registrationsCount === 0">æš‚æ— æŠ¥åè®°å½•</p>
    </div>
  </div>
</main>